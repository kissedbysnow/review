## 1.1.1 操作系统的目标

1. 方便性：操作系统使计算机系统更用于使用
2. 有效性：操作系统使资源的利用率更高，系统的吞吐量更大。
3. 可扩充性：操作系统必须能方便地增加新的功能和模块，并能修改老的功能和模块，以适应计算机硬件、体系结构以及应用发展的要求。
4. 开放性：操作系统的开发应该遵循世界标准规范，特别时候遵循开放系统互连OSI国际标准，从而使其与其他系统之间能彼此兼容、方便地实现互连。

## 1.1.2 操作系统的作用

1. OS作为用户与计算机硬件系统之间的接口

2. OS作为计算机系统资源的管理者

3. OS实现了对计算机资源的抽象

## 1.1.3 推动操作系统发展的主要动力

1. 不断提高计算机资源利用率
2. 方便用户
3. 器件的不断更新换代
4. 计算机体系结构的不断发展
5. 不断提出新的应用需求

## 1.2.1 未配置操作系统的计算机系统

1. 人工操作方式（缺点）
   1. 用户独占全机
   2. CPU等待人工操作

2. 脱机输入/输出（Off-Line I/O）方式（优点）
   1. 减少了CPU空闲时间
   2. 提高了I/O速度

## 1.2.2 单道批处理系统 

1. 单道批处理系统（Simple Batch Processing System）的处理过程

   为实现对作业的连续处理，需要先把一批作业以脱机方式输入到磁带上，并在系统中配上监督程序（Monitor），在它的控制下，使这批作业能一个接一个的连续处理。

2. 单道批处理缺点

   最主要的缺点：系统中的资源得不到充分的利用

## 1.2.3 多道批处理系统（Multiprogrammed Batch Processing System）

1. 多道程序设计的基本概念

   为了进一步提高资源的利用率和系统吞吐量

2. 多道批处理系统的缺点

   1. 资源利用率高
   2. 系统吞吐量大（主要原因）
      1. CPU和其它资源保持“忙碌”状态
      2. 仅当作业完成时或运行不下去时才进行切换，系统开销小

   3. 平均周转时间长
   4. 无交互能力

3. 多道批处理系统需要解决的问题
   1. 处理机争用问题
   2. 内存分配和保护问题
   3. I/O设备分配问题
   4. 文件的组织和管理问题
   5. 作业管理问题
   6. 用户与系统的接口问题

## 1.2.4 分时系统（Time Sharing System）

1. 分时系统的引入

   为了满足用户对人-机交互的需求（需求具体表现在以下方面：）

   1. 人——机交互
   2. 共享主机

2. 分时系统实现中的关键问题

   在多道批处理系统中，用户无法与自己的作业进行交互的主要原因是：作业都驻留在外存上，即使以后被调入内存，也要经过较长时间的等待后方能运行，用户无法与自己的作业进行交互。

   1. 及时接收
   2. 及时处理

3. 分时系统的特征
   1. 多路性
   2. 独立性
   3. 及时性
   4. 交互性

## 1.2.5 实时系统（Real Time System）

1. 实时系统的类型
   1. 工业（武器）控制系统
   2. 信息查询系统
   3. 多媒体系统
   4. 嵌入式系统
2. 实时任务的类型
   1. 周期性实时任务和非周期性实时任务。
   2. 硬实时任务和软实时任务
3. 实时系统与分时系统特征的比较
   1. 多路性
   2. 独立性
   3. 及时性
   4. 交互性
   5. **可靠性**

## 1.2.6 微机操作系统的发展

1. 单用户单任务操作系统
   1. CP/M
   2. MS-DOS

2. 单用户多任务操作系统

   含义：只允许一个用户上机，但允许用户把程序分为若干个任务，使它们并发执行，从而有效改善了系统的性能。

3. 多用户多任务操作系统

   含义：允许多个用户通过各自的终端，使用同一台机器，共享主机系统中的各种资源，而每个用户程序又可进一步分为几个任务，使它们能并发执行，从而进一步提高资源利用率和系统吞吐量。

## 1.3 操作系统的基本特性（重要）

前面介绍的多道批处理系统、分时系统和实时系统这三种基本操作系统都具有各自不同的特征，如批处理系统有着高的资源利用率和系统吞吐量；分时系统能获得及时响应；实时系统具有实时特征。除此之外，它们还具有并发、共享、虚拟和异步四个基本特征。

## 1.3.1 并发（Concurrence）

正是系统中的程序能并发执行这一特征，才使得OS能有效地提高系统中的资源利用率，增加系统的吞吐量。

1. 并行与并发

   并行性和并发性是既相似又有区别的两个概念。__并行性是指两个或多个时间在同一时刻发生。而并发性是指两个或多个事件在同一时间间隔内发生。__

2. 引入进程

   在一个未引入进程的系统中，在属于同一个应用程序的计算机程序和I/O程序之间只能是顺序执行，即只有在计算机程序执行告一段落后，才允许I/O程序执行；反之，在程序执行I/O操作时，计算机也不能执行。但在为计算机程序和I/O程序分别建立一个进程（Process）后，这两个进程便可并发执行。若对内存中的多个程序都分别建立一个进程，它们就可以并发执行，这样便能极大地提高系统资源的利用率，增加系统的吞吐量。

## 1.3.2 共享（Sharing）

一般情况下的共享与操作系统环境下的共享其含义并不完全相同

1. 互斥共享方式

   系统中的某些资源，如打印机、磁带机等虽然可以供给多个进程（线程）使用，但应规定一段时间内，只允许一个进程访问资源。为此，在系统中建立一种机制，以保证多个进程对这类资源的互斥访问。

2. 同时访问方式

   系统中还有另一类西苑，允许在一段时间内由多个进程“同时”对它们进行访问。这里所谓的“同时“，在单处理机环境下是宏观意义上的，而在微观上，这些进程对该资源的访问时交替进行的。典型的可供多个进程”同时“访问的资源是磁盘设备。一些重入码编写的文件也可以被“同时”共享，即允许若干个用户同时访问该文件。

## 1.3.3 虚拟（Virtual）

1. 时分复用技术
   1. 虚拟处理机技术
   2. 虚拟设备技术

2. 空分复用技术

   20世纪初，电信业中就已使用频分复用技术来提高信道的利用率。它是指将一个频率范围比较宽的信道划分成多个频率范围较窄的信道（称为频带），其中的任何一个频带都仅供一对用户通话。早期的频分复用技术只能将一条物理信道划分为几条到几十条话路，后来又很快发展到成千上万条话路，每条话路供一对用户通话。再后来在计算机中也把空分复用技术用于对存储空间的管理，用以提高存储空间的利用率。

## 1.3.4 异步（Asynchronism）

在多道程序环境下，系统允许多个程序并发执行。在处理机环境下，由于系统中只有一台处理机，因而每次只允许一个进程执行，其余进程只能等待。当正在执行的进程提出某种资源要求时，如打印要求，而此时打印机正在为其他进程打印，由于打印机属于临界资源，因此在执行的进程必须等待，并释放处理机，直到打印机空闲，并再次获得处理机时，该进程方能继续执行。可见，由于资源等因素的限制，使进程的执行通常都不可能“一气呵成”，而是以“停停走走”的方式进行。

## 1.4 操作系统的主要功能（重要）

引入OS的主要目的是，为多道程序的运行提供良好的运行环境，以保证多道程序能有条不紊的、高效的运行，并能最大程度地提高系统中各种资源的利用率，方便用户的使用。为此，在传统的OS中应具有处理机管理、存储器管理、设备管理和文件管理等基本功能。此外，为了方便用户使用OS，还需向用户提高方便的用户接口。

## 1.4.1 处理机管理功能

1. 进程控制
2. 进程同步
3. 进程通信
4. 调度
   1. 作业调度
   2. 进程调度

## 1.4.2 存储器管理功能

1. 内存分配（主要任务）
   1. 为每道程序分配内存空间，使它们“各得其所”
   2. 提高存储器的利用率，尽量减少不可用的内存空间（碎片）
   3. 允许正在运行的程序申请附加的内存空间，以适应程序和数据动态增长的需要

>  OS在实现内存分配时，可采取静态和动态两种方式：
>
>1. 静态分配方式:每个作业的内存空间是在作业装入时确定的，在作业装入后的整个运行器件不允许该作业在申请新的内存空间，也不允许作业在内存中“移动”。
>
>2. 动态分配方式：每个作业所要求的基本内存空间虽然也是在装入时确定的，但允许作业在运行过程中继续申请的附加内存空间，以适应程序和数据的动态增长，也允许作业在内存中“移动”。

2. 内存保护（主要任务）
   1. 确保每道用户程序都仅在自己的内存空间运行，彼此互不干扰。
   2. 绝不允许用户程序访问操作系统的程序和数据，也不允许用户程序转移到非共享的其他用户程序中去执行。

3. 地址映射

   在多道程序环境下，由于每道程序经编译和链接后所形成的可装入程序其地址都是从0开始的，但不可能将它们从“0”地址（物理）开始装入内存，致使（各种程序段的）地址空间内的逻辑地址与其在内存空间中的物理地址并不相一致。为保证程序能正确运行，存储器管理必须提供地址映射功能，即能够将地址空间中的逻辑地址转换为内存空间中与之相对应的物理。该功能应在硬件的支持下完成。

4. 内存扩充

   内存扩充并非是从物理上去扩大内存的容量，而是借助于虚拟存储技术，从逻辑上扩充内存容量，使用户所感觉到的内存容量大得多，以便让更多的用户程序能并发执行。这样既满足了用户的需要，又改善了系统的性能。为了能在逻辑上扩充内存，系统必须设置内存扩充机制（包含少量的硬件），用于实现下述各功能：

   1. 请求调入功能。
   2. 置换功能。

## 1.4.3 设备管理功能

主要任务：

1. 完成用户进程提出的I/O请求，为用户进程分配所需的I/O设备，并完成指定的I/O操作。
2. 提高CPU和I/O设备的利用率，提高I/O速度，方便用户使用I/O设备。

为实现上述任务，设备管理应具有缓冲管理、设备分配和设备处理以及虚拟设备等功能

1. 缓冲管理
2. 设备分配
3. 设备处理

## 1.4.4 文件管理功能

1. 文件存储空间的管理
2. 目录管理
3. 文件的读/写管理和保护
   1. 文件的读/写管理
   2. 文件保护

## 1.4.5 操作系统与用户之间的接口

1. 用户接口
   1. 联机用户接口
   2. 脱机用户接口
   3. 图形用户接口

2. 程序接口

   程序接口是为用户程序在执行中访问系统资源而设置的，是用户程序取得操作系统服务的唯一途径。它是由一组系统调用组成的，每一个系统调用都是一个能完成特定功能的子程序。每当应用程序要求OS提供某种服务（功能）时，便调用具有相应功能的系统调用（子程序）。早期的系统调用都是汇编语言提供的，只有在汇编语言书写的程序中才能直接使用系统调用。

## 1.4.6 现代操作系统的新功能

现代操作系统是在传统操作系统基础上发展起来的，它除了具有传统操作系统的功能外，还增加了面向安全、面向网络和面向多媒体等功能。

1. 系统安全
   1. 认证技术
   2. 密码技术
   3. 访问控制技术
   4. 反病毒技术

2. 网络的功能和服务
   1. 网络通信
   2. 资源管理
   3. 应用互操作

3. 支持多媒体
   1. 接纳控制功能
   2. 实时调度
   3. 多媒体文件的存储

## 1.5 OS结构设计

早期的OS的规模很小，如只有几十KB，完全可以由一个人以手工方式，用几个月的时间编制出来。此时，编制程序基本上是一种技巧，OS是否是由结构的并不那么重要，重要的是程序员的程序设计技巧。但随着OS规模的愈来愈大，其所具有的代码也愈来愈多，往往需要由数十人或数百人甚至更多的人参与，分工合作，共同来完成操作系统的设计。这意味着，应采用工程化的开发方法对大型软件进行开发。由此产生了“软件工程学”。

## 1.5.1 传统操作系统结构

1. 无结构操作系统

在早期开发操作系统时，设计者只是把他的注意力放在功能的实现的获得高的效率上，缺乏首尾一致的设计思想。此时的OS是为数众多的一组过程的集合，每个过程可以任意地相互调用其他过程，致使操作系统内部既复杂又混乱，因此，这种OS是无结构的，也有人把它称为整体系统结构。

2. 模块化结构OS

   1. 模块化程序设计技术的基本概念

      模块化程序设计技术是20世纪60年代出现的一种结构化程序设计技术。该技术基于“分解”和“模块化”的原则来控制大型软件的复杂度。为使OS具有较清晰的结构，OS不再是由众多的过程直接构成的，而是按其功能精心地划分为若干个具有一定独立性和大小的模块。

   2. 模块独立性

      在模块-接口法中，关键问题是模块的划分和规定好模块之间的接口。如果我们在划分模块时将模块划分得太小，虽然可以降低模块本身的复杂性，但会引起模块之间的联系过多，从而会造成系统比较混乱；如果将模块划分得过大，又会增加模块内部的复杂性，使内部的联系增加，因此在划分模块时，应在两者间进行权衡。

   3. 模块接口法的优缺点

   优点：

   1. 提高OS设计的正确性，可理解性和可维护性

   2. 增强OS的可适应性

   3. 加速OS的开发过程

   存在的问题：
   
   1. 在OS设计时，对各模块间的接口规定很满足在模块设计完成后对接口的实际需求。
   2. 在OS设计阶段，设计者必须做出一系列的决定（决策），每一个决定必须建立在上一个决定的基础上，但模块化结构设计中，各模块的设计齐头并进，无法寻找一个可靠的决定顺序，造成各种决定的“无序性”，这将使程序人员很难做到“设计中的每一步决定”都是建立在可靠的基础上，因此模块-接口法又被称为“无序模块法”。

3. 分层结构OS

   1. 分层式结构的基本概念：

      为了将模块-接口法中的“决定顺序”的无序性变为有序性，引入了有序分层法，在操作系统中，常采用自底向上法来铺设这些中间层。

   2. 分层结构的优缺点

      优点：

      1. 易保证系统的正确性
      2. 易扩充和易维护性

      分层结构的主要缺点是系统效率降低。由于层次结构是分层单向依赖的，必须在每层之间都建立层次间的通信机制，OS每执行一个功能，通常要自上而下德穿越多个层次，这无疑会增加系统的通信开销，从而导致系统效率的降低。

## 1.5.2 客户/服务器模式（Client/Server Model）简介

1. 客户/服务器模式的由来、组成和类型

   客户/服务器系统主要由三部分组成。

   1. 客户机
   2. 服务器
   3. 网络系统

2. 客户/服务器之间的交互
   1. 客户发送请求消息。
   2. 服务器接收消息
   3. 服务器回送消息
   4. 客户机接收消息

3. 客户/服务器模式的优点
   1. 数据的分布处理的存储
   2. 便于集中管理
   3. 灵活性和可扩充性
   4. 易于改变应用软件

## 1.5.3 面向对象的程序设计（Object-Orientated Programming）技术简介 

1. 面向对象技术的基本概念

   面向对象技术是20世纪80年代初提出并很快流行起来的。

   1. 对象

      在面向对象的技术中，是利用被封装的数据结构（变量）和一组对它进行操作的过程（方法）来表示系统中的某个对象，对象中的变量（数据）也称为属性，它可以是单个标量或一张表。面向对象中的方法是用于执行某种功能的过程，它可以改变对象的状态，更新对象中的某些数据值或作用域对象所要访问的外部资源。如果把一个文件作为一个对象，该对象的变量便是文件类型、文件大小、文件的创建者等。对象中的方法包含对文件的操作，如创建文件、打开文件、读文件、写文件、关闭文件等。

   2. 对象类

      在实践中，有许多对象可能表示的是同一类事物，每个对象具有自己的变量集合，而它们所具有的方法是相同的。如果为每一个相似的对象都定义一组变量和方法，显然是低效的，由此产生了“对象类”的概念，利用对象类