__基础知识请看书 P148-149__

**物理地址** = **块号** * 1024（**页面大小**） + **偏移量**（余数）

#### 例题1
若一分页存储管理系统中，某作业的页表如下所示。已知页面大小为 1024 字节，试将逻辑地址 1011，2148，4000，5012 转化为相应的物理地址。

| 页号 | 物理块号 |
| :--: | :------: |
|  0   |    2     |
|  1   |    3     |
|  2   |    1     |
|  3   |    6     |

**解析：**

| 逻辑地址     | 1011                       | 2148                      | 4000                      | 5012                      |
| :----------- | -------------------------- | ------------------------- | ------------------------- | ------------------------- |
| 页号         | `1011 / 1024 = 0 + (1011)` | `2148 / 1024 = 2 + (100)` | `4000 / 1024 = 3 + (928)` | `5012 / 1024 = 4 + (916)` |
| 对应物理块号 | 2                          | 1                         | 6                         | 这一页没有装入内存        |
| 物理地址     | `2 * 1024 + (1011)`=3059   | `3 * 1024 + (100)` =1124  | `6 * 1024 + (928)` =7072  | 无法计算                  |

- 逻辑地址：1011

  页号：`1011 / 1024 = 0 + (1011)`

  对应物理块号：2

  物理地址：`2 * 1024 + (1011)`

- 逻辑地址：2148

  页号：`2148 / 1024 = 2 + (100)`

  对应物理块号：3

  物理地址：`3 * 1024 + (100)`

- 逻辑地址：4000

  页号：`4000 / 1024 = 3 + (928)`

  对应物理块号：6

  物理地址：`6 * 1024 + (928)`

- 逻辑地址：5012

  页号：`5012 / 1024 = 4 + (916)`

  对应物理块号：这一页没有装入内存

  物理地址：无法计算

---

#### 例题2

某虚拟存储器的用户空间共有32个页面，每页面1KB，主存16KB。假定某时刻系统为用户的低0、1、2、3页分配的物理块号为5、10、4、7.而该用户的作业长度为6页，试将十六进制的虚拟地址0A5C、103C、1A5C转化为物理地址。

__解：__

​	__0A5C__对应的二进制为  0000 1010  0101  1100

​    每页大小为1KB，故 后10位表示页内地址，即 10  0101  1100

​    页号为前六位表示，即 0000  10，所以页号为2

​    对应的物理块号为4，用2进制表示为 0100

​    即物理地址为  0001 0010 0101 1100（前两个0是为了补成16位）

​    =1 2 5 C

  > __主存大小为16KB,物理块大小=页面大小=1KB，所以共有16个物理块__(在与页面中断结合的题目中会用到)

| 虚拟地址     | 0A5C                | 103C                | 1A5C                |
| ------------ | ------------------- | ------------------- | ------------------- |
| 对应的二进制 | 0000 1010 0101 1100 | 0001 0000 0011 1100 | 0001 1010 0101 1100 |
| 页内地址     | 10 0101 1100        | 00 0011 1100        | 10 0101 1100        |
| 页号         | 0000 10=2           | 0001 00=4           | 0001 10=6           |
| 物理块号     | 4                   | 不在主存中          | 不在主存中          |
| 物理地址     | 0001 0010 0101 1100 |                     |                     |

***

#### 例题3

某虚拟内存器的用户空间共有32个页面，每页1KB，主存16KB。假定某时刻用户页表已调入主存的页面的虚拟号和物理页号对照表如下所示：

| 虚拟号 | 物理页号 |
| ------ | -------- |
| 0      | 5        |
| 1      | 10       |
| 2      | 4        |
| 3      | 2        |

则与下面十六进制虚地址相对应的物理地址为（如果主存中找不到，即为页失效）

__解__:

| 虚拟地址     | 1B7A                | 0D9E                        |
| ------------ | ------------------- | --------------------------- |
| 对应的二进制 | 0001 1011 0111 1010 | 0000 1101 1001 1110         |
| 页内地址     | 11 0111 1010        | 01 1001 1110                |
| 页号         | 0001 10=6           | 0000 11=3                   |
| 物理页号     | 页失效              | 2=0010                      |
| 物理地址     |                     | 0000 1001 1001 1110=0 9 9 E |

***

#### 例题4

在一个分页存储管理系统中，页面大小为4KB，系统中的地址占24位，给定页面变换表如下表所示。

| 页号P | 块号B |
| ----- | ----- |
| 0     | 3     |
| 1     | 4     |
| 2     | 9     |
| 3     | 7     |
1. 计算逻辑地址（页号为3，页内地址为100）的物理地址：

   页号为3，对应物理块号为7

   物理地址=物理块号\*页面大小+偏移量=7\*4*1024+100=28772

2. 说明地址变换过程。

   在请求分页存储管理方案中，系统是通过页表来进行地址转换的。先将逻辑地址分解成页号P和页内地址w两部分，然后通过查页表获得页号P对应的物理块号B。将物理块号乘以页面大小，再将页内地址W加到其上即获得最终的物理地址，即变换公式如下：
     物理地址=块号×页面大小+页内地址

***

#### 例题5

设作业的虚拟地址为24位，其中高8位为段号，低16位为段内相对地址。试问：

1. 一个作业最多可以有多少段？

   最多为2的八次方段，256段。

2. 每段的最大长度为多少字节？

   2的16次方=65536字节

3. 某段氏存储管理采用如下段表，试计算[0,430]、[1,50]、[2,30]、[3,70]的主存地址。其中方括号前一元素为段号，后一元素为段内地址。当无法进行地址变换时，应说明产生何种中断。

   | 段号 | 段长 | 主存起始地址 | 是否在主存 |
   | ---- | ---- | ------------ | ---------- |
   | 0    | 600  | 2100         | 是         |
   | 1    | 40   | 2800         | 是         |
   | 2    | 100  |              | 否         |
   | 3    | 80   | 4000         | 是         |

   > 分段系统的基本原理：每个段都从0开始编址，并采用一段连续的地址空间。段的长度由相应的逻辑信息组的长度决定，因此各段的长度并不相等。整个作业的地址空间由于被分成多个段，多以呈现出二维特性，亦即，每个段既包含了一部分地址空间，又标识了逻辑关系。其逻辑地址由段号（段名）和段内地址所组成。
   |          | [0,430] | [1,50]       | [2,30]   | [3,70] |
   | -------- | ------- | ------------ | -------- | ------ |
   | 主存地址 | 2530    | 段内大于段长 | 不在主存 | 4070   |

   ***

#### 例题6

在一请求分页存储管理系统中，主存容量为1MB，被划分为为256块，每块4KB，现有一作业，其页表如下所示。

| 页号 | 块号 | 状态 |
| ---- | ---- | ---- |
| 0    | 24   | 0    |
| 1    | 26   | 0    |
| 2    | 32   | 0    |
| 3    | --   | 1    |
| 4    | --   | 1    |

试问：

1. 若给定一逻辑地址为9016（十进制），求其物理地址。

   页号=int[9016/4096]=2

   块号=32

   页内地址=[9016] mod 4096=824

   物理地址=32\*4096+824=131896

2. 若给定一逻辑地址为12300（十进制），其物理地址如何得到？

   页号=int[12300/4096]=3

   块号= --