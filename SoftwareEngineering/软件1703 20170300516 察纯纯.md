# 农业病虫害信息网

## 一、可行性研究

可行性分析(FeasibilityAnalysis)，即可行性研究，它是针对新系统的开发是不是具备必可能性和必要性并基于对系统的调查，对新系统的开发从技术、社会和经济等方面开展分析和研究工作，以避免投资失误，从而保障新系统的开发成功。可行性研究的目标是用最小的代价在尽量短的时间内确定问题是否可以得到解决。其实质上是要进行一次大大压缩简化了的系统分析和设计过程，即以较抽象的方式在较高层次上进行的系统分析和设计的过程。

### 1.1 技术可行性分析

本系统是一个前后端分离的项目，前端基于Vue + iView-Admin + Vue-Router + Vuex + Axio，后端基于 SpringBoot + Shiro + Mybatis + Mybatis-Plus + HikariCP + Redis + Vue + iView 等轻量级管理系统快速开发脚手架，拥有角色、用户、资源管理、权限数据同步更新等功能。

普通计算机硬件配置即可满足开发要求，页面 UI 设计使用软件 Axure RP，前端开发软件使用 JetBrains WebStorm，后端开发软件使用 IntelliJ IDEA，数据库使用 MySQL，版本控制软件使用 Git。 

这些软件都已经有了功能全面、稳定的版本，故软件的开发平台成熟可行,它们不仅可靠性高而且稳定，因此完全可以满足系统的需求。

### 1.2 经济可行性分析

系统所需要的硬件环境，即计算机及其相关的硬件，从市场上可以很容易地购买到。所需软件环境可以从网上免费下载，从而降低了开发成本。本系统主要的开发与维护成本也不会造成太大的经济压力。此系统正式投入使用后，用户可以在线查找有关病虫的信息，还可以在线提交问题，以寻求专家的帮助。对于用户来说，可以了解更多关于病虫危害的信息，更加科学培育。对于专家来说，可以了解用户在现实生活中存在的问题，方便彼此的沟通交流。

### 1.3 操作可行性分析

本信息网主要是为了方便专家与用户之间的答疑工作的开展，提高培训种植的效率。用户将所遇到的病虫危害通过系统呈现给专家，待专家回答后，可查看问题的回复。

## 二、需求规格说明

在开发任何一个系统之前，进行必需的系统分析是非常有必要的，主要是根据对客户的需求和本系统的一些特点和模块的分析等来确定如何有效地进行实际的开发。需求分析是软件设计的一个重要组成部分。为了确定系统的目标，应在本阶段对系统的应用情况进行全面的调查。

### 2.1 功能性需求分析

#### 2.1.1系统用户

1. 超级管理员/系统管理员；
2. 普通用户
3. 专家

#### 2.1.2 用户功能

- 超级管理员/系统管理员功能
  - 具有所有权限。
  - 管理管理员，上级管理员可以管理下级管理员
  - 管理用户
  - 管理内容
-  专家功能
  - 具有回复问题的权限
  - 用户的登录，专家可以自由地登录农业病虫害信息网
  - 资料的修改，专家可以修改自己的资料
  - 查看待回答的问题，专家登录后，可以查看待回答问题的列表
  - 查看已回答的问题，对于已经回答的问题，专家不仅可以查看，而且可以继续回复讲解
- 普通用户
  - 注册和登录，普通用户不仅可以很方便的进行用户注册，也能够登录在线答疑系统。
  - 资料的修改，注册后用户可以修改自己的注册资料。
  - 查看提问，普通用户发起问题后，可以查看该问题的回复情况
  - 查看参与的提问，普通用户不仅可以对自己的问题进行讨论，而且也可以参加别的问题的讨论。

### 2.2 非功能性需求分析

#### 2.2.1 系统安全性需求

在软件使用方面，所有使用者统一使用 Shiro 权限验证核验身份后进入系统。用户、角色和权限分别对应。

#### 2.2.2 系统开发运行环境需求

- JDK：作为整个Java的核心包含了Java的基础类库、运行环境和Java工具，是 Java 语言的软件开发工具包。

- MyEclipse：是一个非常杰出的Java开发工具，对各种开源产品的支持非常好。它不仅功能非常强大，而且具备非常广泛的支持性能。

- Tomcat服务器：适用于中小型系统开发的web应用服务器，开放源代码且免费。其性能稳定、技术先进，因此不但博得了Java 开发人员的喜爱，而且也得到了一些软件开发商的肯定，是当今较流行的Web 应用服务器。

- MySQL数据库：是目前小型应用开发中比较流行的数据库，且从MySQL5.0版本开始支持事务，保证了数据库的完整性和安全性。

- Spring Boot是由Pivotal团队提供的全新框架，其设计目的是用来简化新Spring应用的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。通过这种方式，Spring Boot致力于在蓬勃发展的快速应用开发领域(rapid application development)成为领导者。

- Vue (读音 /vjuː/，类似于 view) 是一套用于构建用户界面的渐进式JavaScript框架。与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。Vue 的核心库只关注视图层，方便与第三方库或既有项目整合。

- Apache Shiro（读作“sheeroh”，即日语“城”）是一个开源安全框架，提供身份验证、授权、密码学和会话管理。Shiro框架直观、易用，同时也能提供健壮的安全性。

- Redis（Remote Dictionary Server )，即远程字典服务，是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。

- Maven项目对象模型(POM)，可以通过一小段描述信息来管理项目的构建，报告和文档的项目管理工具软件。

  Maven 除了以程序构建能力为特色之外，还提供高级项目管理工具。由于 Maven 的缺省构建规则有较高的可重用性，所以常常用两三行 Maven 构建脚本就可以构建简单的项目。由于 Maven 的面向项目的方法，许多 Apache Jakarta 项目发文时使用 Maven，而且公司项目采用 Maven 的比例在持续增长。

## 三、总体设计说明

总体设计，也可以称为概要设计或者初步设计，其基本目的便是回答“概括地说，应当如何实现系统”这个问题。经过这个阶段，将划分出构成系统的物理元素（数据库、程序、文件、文档和人工过程等），然而所有的物理元素依旧处于黑盒子级，这些黑盒子里的具体内容将在之后进行详细的设计。总体设计阶段的另外一项重要任务是确定系统中的每一个程序由哪些模块构成以及这些模块相互之间的关系，即设计软件的结构。

### 3.1 项目规划

总体规划：农业病虫害信息网是一个非常典型的前后端分离项目，它由前端展示页面模块、后台数据管理模块和静态资源服务器三大模块构成。

- 前端页面提供身份登录接口，验证交由后端处理。驿站的各项操作，活动的申请，附件的上传下载等。

- 后端进行数据库的管理和维护，所有的文本信息都交由后端处理并存储。

- 静态资源服务器负责存储发布文件、视频、文档、图片等静态资源。

### 3.2 系统总体结构 

系统总体结构是系统总体设计的核心部分，通过系统结构图可以很清楚地看出整个系统的结构。根据各个结构模块分别进行分析，从而为将来的设计和实现打下良好的基础。根据前面对系统所做出的分析，本系统总体上包括5类用户。系统总体结构如下图所示。





### 3.3 系统功能模块

农业病虫害信息网根据用户的类别共分成三个模块：普通用户模块、专家用户模块和管理员模块。





#### 3.3.1 用户模块定义

| **功能模块** | **定义**                       |
| ------------ | ------------------------------ |
| **注册用户** | **用于注册用户信息**           |
| **用户登录** | **用于用户登录系统的身份验证** |
| **修改资料** | **用于用户修改个人资料**       |
| **搜索资源** | **用于用户搜索所有的资源**     |

#### 3.3.2 专家模块定义

| **功能模块**     | **定义**                       |
| ---------------- | ------------------------------ |
| **注册用户**     | **用于注册用户信息**           |
| **用户登录**     | **用于用户登录系统的身份验证** |
| **修改资料**     | **用于用户修改个人资料**       |
| **搜索资源**     | **用于用户搜索所有的资源**     |
| **上传知识科普** | **用于专家用户上传科普**       |

#### 3.3.3 管理员模块定义

| **功能模块**           | **定义**                                 |
| ---------------------- | ---------------------------------------- |
| **驿站负责人登录**     | **用于驿站负责人登录系统的身份验证**     |
| **县科技局管理员登录** | **用于县科技局管理员登录系统的身份验证** |
| **市科技局管理员登录** | **用于市科技局管理员登录系统的身份验证** |
| **省科技局管理员登录** | **用于省科技局管理员登录系统的身份验证** |
| **驿站管理**           | **用于管理驿站的日常事务**               |
| **驿站日志**           | **用于编写驿站的情况**                   |

## 四、详细设计说明书

通过这一阶段的工作进行了详细的设计，我们将会确切地描述所要开发的目标系统，其基本任务是要确定能够具体地实现所要求的系统的方法途径。

### 4.1 界面设计

对于任何系统来讲，设计用户界面都是相当重要的。因为一个交互良好的界面不仅可以使浏览者对系统的印象更深刻，而且可以为与客户进行沟通提供方便。

本系统的界面使用vue页面来实现，并采用DIV+CSS技术对界面进行美化。
在页面的实现过程中，主要遵循了以下两个原则：

1. 统一连贯。页面的整体风格要与自己所要表达的内容相符，本系统是在线答疑系统，采用草绿色为界面的颜色基调，能凸显学生的活力和知识学习生机勃勃的景象。
2. 布局合理、和谐。整个页面要符合大众人群的审美观念。布局是一个页面显示的主体框架，一个设计良好的布局，能给用户很好的使用效果和深刻的浏览记忆。

本系统的主界面如下图所示。

 * 首页上方为菜单导航栏，有蔬菜、病害、害虫、种子、农药、肥料等选项
 * 搜索栏可以通过一些关键字来查询相关信息
 * 界面下方根据所选的类型来显示植物的图片、病害的图片或一些其他的基本信息





### 4.2 系统分层的实现

根据MVC设计思想，本系统以SpringBoot框架为控制器，用来管理各页面传过来的请求，从而发给相应的action处理；

各vue页面作为动态页面表示层来进行显示；MybatisPlus和各个Action等均作为Spring当中的受管Bean。

#### 4.2.1 表现层的设计
所有样式，都会在 src/style/ 文件夹中对应的位置去写。我这样做的好处是，不需要重复的引入各种 scss 基础文件，并且做到了项目的样式代码的可管控。

#### 4.2.2 控制层的设计
控制层的采用的是SpringBoot框架。因为能够使用SpringBoot的控件上传文件，并且其拦截器机制也能够对特定信息进行拦截。该系统中SpringBoot的工作原理体现如下：当用户从前台页面选择操作后，通过SpringBoot控制器转发给相应的action进行处理，各action通过Spring的依赖注入的MybatisPlus来实现对数据库的各项操作，最后将得到的数据传到页面进行显示。

### 4.3 各个功能模块的设计与实现

根据系统分析和系统的总体设计，基本确定了该系统所包含的模块，下面具体介绍各个模块的基本功能的设计与实现。

#### 4.3.1 用户登录和注册

依据系统分析和功能的需求，用户在没有登录的情形下，除了对系统首页进行浏览外无法执行其它操作。只有在登陆成功的情况下，才能够发表疑问和回复并执行其它操作。普通用户和管理员通过系统首页登录系统。
在利用SpringBoot框架进行开发的过程中，有时一个动作要与一个Action对应，可是这些Action中有些属性或方法是通用的，倘若在每一个Action里面反复书写相同的属性或方法就会导致代码看起来不仅冗长并且枯燥。因此，首先要定义一个可以让之后的所有Action继承的一个包含通用属性和方法的基类Action，即BaseAction类。其具体实现类是DYBaseAction。

1. 用户注册

   用户通过系统首页进入注册页面，因为注册的用户有很多，本模块使用了Ajax异步交互技术，在客户端还未提交注册表之前可以对信息进行验证，倘若注册信息不符合要求则禁止提交，这样不但使得网络流量在很大程度上得到减少，而且也使得服务器的负担得到极大的减轻。
   采用Ajax技术向服务器发送异步请求，在创建好XmlHttpRequest对象后要获取用户注册时所填写的用户名，而后再把验证请求发送到服务器端。

2. 用户登录

   - 普通用户和管理员用户通过系统主页登录。

#### 4.3.2 普通用户模块

普通用户成功登录系统后，主页面显示了农业病虫害信息网的基本信息包括：蔬菜、病害、害虫、种子、农药、肥料等选项

#### 4.3.3 专家模块

专家进入系统后，可以添加病害、虫害等实体信息。专家还具有全站信息的修改权限。

病虫害专家意见更新服务：主要面向农业方面的专家学者，具有基本的查询服务，也具有申请更新的权限。

此需求面向各农业院校的专家以及农业领域的学者，专家根据已经被确定了的关于病虫害方面的知识内容，来提交更新病虫害信息网系统申请，此申请可包括以下内容：

- 现在存在的蔬菜，而病虫害网尚未录入的蔬菜类型
- 某种蔬菜存在以及新发现的一些病害，而病虫害系统尚未录入
- 农业方面存在的一些病虫以及新发现的病虫，而病虫害系统尚未录入
- 一些蔬菜的种子新研发以及突变生成的类型，需要重新重新更新病虫害系统
- 新研发的农药以及尚未录入系统的农药，以及其功能特性，需要录入此系统的。
- 新研发的以及尚未录入系统的肥料以及其作用，需录入系统的。
- 提交更新申请内容的要求

为避免通过主观意识来编写申请，更新申请的内容要符合一定的规范，例如发现新的病虫或研制出了新的农药化肥，要有一定的文献资料作为支持。申请文档要求符合一定的规范，方便系统管理人员对更新申请内容的审核。

#### 4.3.4 管理员模块
管理员分为普通管理员和超级管理员，普通管理与与超级管理员相比只是少了对管理员进行管理的权限。接下来以超级管理员为例来描述管理员模块的详细设计与实现。管理员成功登录系统后进入系统的在线管理中心。

当农业方面的专家提交了更新系统内容的申请后，系统管理人员根据专家提供的内容以及支持其相关论点的文献或其它内容，审核其提交申请内容的正确性以及严谨性，通过审核以后，系统管理人员将新的内容提交到病虫害系统，完成系统的更新。

系统管理人员审核申请正确无误后将新内容录入系统，并向普通用户开放系统。为普通用户提供最新的内容。

## 五、数据库设计及测试设计说明

### 5.1 数据库设计

数据库技术是管理信息资源的最佳方式。数据库设计是针对一个特定的应用环境构造出最优的数据库模式来创建数据库及其应用系统，从而实现对数据的有效存储，以满足用户对信息和处理的要求。数据库结构的设计将直接影响到应用系统的效率和实现的效果。因此，合理的数据库设计不但能够提升数据存储的效率，而且可以有效的确保数据的完整性和一致性。

确定了系统需要开发的功能之后，接下来应该进行数据库的设计工作，分析该系统的各个实体之间的关系，做好数据库的设计对后期的开发有着非常重要的作用。

#### 5.1.1 数据库分析

由于本系统的规模不是很大，因此选用MySQL数据库，该数据库为开源免费产品，可以直接通过网上下载得到，从而大大节约了开发成本。MySQL数据库是现今小型应用开发中比较流行的数据库，且从其5.0版本开始支持事务，能够确保数据的完整性和安全性。

#### 5.1.2 项目E-R图

农业病虫害信息网可供农学专业相关的老师用于课堂讲授，也可用于学生自我学习。下面将介绍各个实体所对应的E-R图。

- 病害
- 害虫
- 蔬菜
- 种子
- 农药
- 肥料

#### 5.1.3 数据库表的设计

系统数据库设计的好坏不仅对今后网站连接数据库的速度有着非常重要的影响，而且也对查询更新的复杂度有着非常重要的影响。本节介绍对本系统的数据库表进行的设计，是在完成系统功能分析的基础上根据系统的需求目标而进行的设计。根据前面所介绍的实体所拥有的属性以及实体之间的关系描述，下面将介绍数据库中这些实体对应的表的设计，具体设计如下所示。



### 5.2 系统各个功能点的测试

1. 添加功能：关于添加功能主要测试以下几方面：
   1. 关于必填项的测试
   2. 关于唯一性的测试
   3. 关于输入项长度的测试
   4. 关于输入内容限制的测试
   5. 其它方面的测试
2.  修改功能
3. 删除功能
4. 查询功能
5. 翻页功能
6. 导入、导出、上传文件
7. ………… 

测试内容较多，该部分仅以关于某模块输入项长度的测试为例。

关于输入项长度的测试
电话号码长度（系统规定该长度为11位）

| 序号 | 测试号码长度 | 测试用例      | 输出结果                     |
| ---- | ------------ | ------------- | ---------------------------- |
| 1    | 7            | 5223612       | 注册失败，电话号码不符合规范 |
| 2    | 9            | 871230342     | 注册失败，电话号码不符合规范 |
| 3    | 11           | 55344342421   | 注册成功                     |
| 4    | 13           | 5420124825240 | 注册失败，电话号码不符合规范 |

密码长度（系统规定密码长度最小为 6 位，最大为 10 位）

| 测试用例序号 | 密码输入长度 | 测试用例    | 输出结果           |
| ------------ | ------------ | ----------- | ------------------ |
| 1            | 5            | 123gf       | 注册失败，密码过短 |
| 2            | 6            | 6rd7t9      | 注册成功           |
| 3            | 8            | 4542876g    | 注册成功           |
| 4            | 10           | Fgh7621fd0  | 注册成功           |
| 5            | 11           | 78jhhvbh547 | 注册失败，密码过长 |